{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{useDate}from\"../../context/date-context\";import{useCategory}from\"../../context/category-context\";import{DateSelector}from\"../DateSelector/DateSelector\";import\"./SearchStayWithDate.css\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const SearchStayWithDate=()=>{const{dateDispatch,destination,guests,isSearchResultOpen}=useDate();const{hotelCategory}=useCategory();const[hotels,setHotels]=useState([]);const navigate=useNavigate();useEffect(()=>{(async()=>{try{const{data}=await axios.get(\"https://travelapp-backend-cdeh.onrender.com/api/hotels?category=\".concat(hotelCategory));setHotels(data);}catch(err){console.error(\"Error fetching hotels:\",err);}})();},[hotelCategory]);const handleDestinationChange=e=>{dateDispatch({type:\"DESTINATION\",payload:e.target.value});};const handleGuestChange=e=>{dateDispatch({type:\"GUESTS\",payload:e.target.value});};const handleSearchResultClick=address=>{dateDispatch({type:\"DESTINATION\",payload:address});};const destinationOptions=hotels.filter(_ref=>{let{address,city,state,country}=_ref;return address.toLowerCase().includes(destination.toLowerCase())||city.toLowerCase().includes(destination.toLowerCase())||state.toLowerCase().includes(destination.toLowerCase())||country.toLowerCase().includes(destination.toLowerCase());});const handleDestinationFocus=()=>{dateDispatch({type:\"SHOW_SEARCH_RESULT\"});};const handleSearchButtonClick=()=>{dateDispatch({type:\"CLOSE_SEARCH_MODAL\"});navigate(\"/hotels/\".concat(destination));};const handleCoseModal=()=>{dateDispatch({type:\"OPEN_SEARCH_MODAL\"});};return/*#__PURE__*/_jsxs(\"div\",{className:\"destination-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"destionation-options d-flex align-center absolute\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"location-container\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Where\"}),/*#__PURE__*/_jsx(\"input\",{value:destination,onChange:handleDestinationChange,onFocus:handleDestinationFocus,className:\"input search-dest\",placeholder:\"Search Destination\",autoFocus:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"location-container\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Check in\"}),/*#__PURE__*/_jsx(DateSelector,{checkInType:\"in\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"location-container\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Check out\"}),/*#__PURE__*/_jsx(DateSelector,{checkInType:\"out\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"location-container\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"No. of Guests\"}),/*#__PURE__*/_jsx(\"input\",{value:guests,className:\"input search-dest\",placeholder:\"Add guests\",onChange:handleGuestChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-container d-flex align-center cursor \",onClick:handleSearchButtonClick,children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons-outlined\",children:\"search\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Search\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCoseModal,className:\"button absolute close-search-dest\",children:/*#__PURE__*/_jsx(\"span\",{className:\"highlight material-icons-outlined\",children:\"highlight_off\"})})]}),isSearchResultOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"search-result-container absolute\",children:destinationOptions&&destinationOptions.map(_ref2=>{let{address,city}=_ref2;return/*#__PURE__*/_jsxs(\"p\",{className:\"p cursor-pointer\",onClick:()=>handleSearchResultClick(address),children:[address,\", \",city]});})})]});};","map":{"version":3,"names":["React","useState","useEffect","axios","useDate","useCategory","DateSelector","useNavigate","jsx","_jsx","jsxs","_jsxs","SearchStayWithDate","dateDispatch","destination","guests","isSearchResultOpen","hotelCategory","hotels","setHotels","navigate","data","get","concat","err","console","error","handleDestinationChange","e","type","payload","target","value","handleGuestChange","handleSearchResultClick","address","destinationOptions","filter","_ref","city","state","country","toLowerCase","includes","handleDestinationFocus","handleSearchButtonClick","handleCoseModal","className","children","onChange","onFocus","placeholder","autoFocus","checkInType","onClick","map","_ref2"],"sources":["D:/travelappfrontend/src/components/SearchStayWithDate/SearchStayWithDate.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useDate } from \"../../context/date-context\";\r\nimport { useCategory } from \"../../context/category-context\";\r\nimport { DateSelector } from \"../DateSelector/DateSelector\";\r\nimport \"./SearchStayWithDate.css\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport const SearchStayWithDate = () => {\r\n    const { dateDispatch, destination , guests,isSearchResultOpen} = useDate();\r\n    const { hotelCategory } = useCategory();\r\n    const [hotels, setHotels] = useState([]);\r\n\r\n    const navigate = useNavigate()\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                const { data } = await axios.get(`https://travelapp-backend-cdeh.onrender.com/api/hotels?category=${hotelCategory}`);\r\n                setHotels(data);\r\n            } catch (err) {\r\n                console.error(\"Error fetching hotels:\", err);\r\n            }\r\n        })();\r\n    }, [hotelCategory]);\r\n\r\n    const handleDestinationChange = (e) => {\r\n        dateDispatch({\r\n            type: \"DESTINATION\",\r\n            payload: e.target.value\r\n        });\r\n    };\r\n\r\n    const handleGuestChange = (e) => {\r\n        dateDispatch({\r\n            type: \"GUESTS\",\r\n            payload: e.target.value\r\n        });\r\n    };\r\n\r\n    const handleSearchResultClick = (address)=>{\r\n        dateDispatch({\r\n            type:\"DESTINATION\",\r\n            payload:address\r\n        })\r\n    }\r\n\r\n    const destinationOptions = hotels.filter(({ address, city, state, country }) =>\r\n        address.toLowerCase().includes(destination.toLowerCase()) ||\r\n        city.toLowerCase().includes(destination.toLowerCase()) ||\r\n        state.toLowerCase().includes(destination.toLowerCase()) ||\r\n        country.toLowerCase().includes(destination.toLowerCase())\r\n    );\r\n\r\n\r\n    const handleDestinationFocus = ()=>{\r\n            dateDispatch({\r\n                type: \"SHOW_SEARCH_RESULT\",\r\n\r\n            })\r\n    }       \r\n\r\n    const handleSearchButtonClick  = () =>{\r\n        dateDispatch({\r\n            type :\"CLOSE_SEARCH_MODAL\",\r\n        })\r\n        navigate(`/hotels/${destination}`)\r\n    }\r\n\r\n    const handleCoseModal = ()=>{\r\n        dateDispatch({\r\n           type: \"OPEN_SEARCH_MODAL\"\r\n        })\r\n    }\r\n    return (\r\n        <div className=\"destination-container\">\r\n        <div className=\"destionation-options d-flex align-center absolute\">\r\n          <div className=\"location-container\">\r\n            <label className=\"label\">Where</label>\r\n            <input\r\n              value={destination}\r\n              onChange={handleDestinationChange}\r\n              onFocus={handleDestinationFocus}\r\n              className=\"input search-dest\"\r\n              placeholder=\"Search Destination\"\r\n              autoFocus\r\n            />\r\n          </div>\r\n          <div className=\"location-container\">\r\n            <label className=\"label\">Check in</label>\r\n            <DateSelector checkInType=\"in\" />\r\n          </div>\r\n          <div className=\"location-container\">\r\n            <label className=\"label\">Check out</label>\r\n            <DateSelector checkInType=\"out\" />\r\n          </div>\r\n          <div className=\"location-container\">\r\n            <label className=\"label\">No. of Guests</label>\r\n            <input\r\n              value={guests}\r\n              className=\"input search-dest\"\r\n              placeholder=\"Add guests\"\r\n              onChange={handleGuestChange}\r\n            />\r\n          </div>\r\n          <div\r\n            className=\"search-container d-flex align-center cursor \" onClick={handleSearchButtonClick}\r\n            \r\n          >\r\n            <span className=\"material-icons-outlined\">search</span>\r\n            <span>Search</span>\r\n          </div>\r\n          <button onClick={handleCoseModal}className=\"button absolute close-search-dest\"><span  className=\"highlight material-icons-outlined\">\r\n            highlight_off\r\n          </span></button>\r\n        </div>\r\n        {isSearchResultOpen && (\r\n          <div className=\"search-result-container absolute\">\r\n            {destinationOptions &&\r\n              destinationOptions.map(({ address, city }) => (\r\n                <p\r\n                  className=\"p cursor-pointer\"\r\n                  onClick={() => handleSearchResultClick(address)}\r\n                >\r\n                  {address}, {city}\r\n                </p>\r\n              ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}