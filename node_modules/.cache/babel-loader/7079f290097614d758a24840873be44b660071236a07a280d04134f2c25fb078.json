{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{useDate}from\"../../context/date-context\";import{useCategory}from\"../../context/category-context\";import{DateSelector}from\"../DateSelector/DateSelector\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const SearchStayWithDate=()=>{const{dateDispatch,destination,guests,isSearchResultOpen}=useDate();const{hotelCategory}=useCategory();const[hotels,setHotels]=useState([]);const navigate=useNavigate();useEffect(()=>{(async()=>{try{const{data}=await axios.get(\"https://travelapp-backend-cdeh.onrender.com/api/hotels?category=\".concat(hotelCategory));setHotels(data);}catch(err){console.error(\"Error fetching hotels:\",err);}})();},[hotelCategory]);const handleDestinationChange=e=>{dateDispatch({type:\"DESTINATION\",payload:e.target.value});};const handleGuestChange=e=>{dateDispatch({type:\"GUESTS\",payload:e.target.value});};const handleSearchResultClick=address=>{dateDispatch({type:\"DESTINATION\",payload:address});};const destinationOptions=hotels.filter(_ref=>{let{address,city,state,country}=_ref;return address.toLowerCase().includes(destination.toLowerCase())||city.toLowerCase().includes(destination.toLowerCase())||state.toLowerCase().includes(destination.toLowerCase())||country.toLowerCase().includes(destination.toLowerCase());});const handleDestinationFocus=()=>{dateDispatch({type:\"SHOW_SEARCH_RESULT\"});};const handleSearchButtonClick=()=>{dateDispatch({type:\"CLOSE_SEARCH_MODAL\"});navigate(\"/hotels/\".concat(destination));};const handleCloseModal=()=>{dateDispatch({type:\"OPEN_SEARCH_MODAL\"});};return/*#__PURE__*/_jsx(\"div\",{className:\"destination-container fixed inset-0 z-50 bg-overlay flex justify-center items-start\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"destination-options bg-background rounded-lg p-4 md:w-96 w-11/12 mt-12 relative flex \",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleCloseModal,className:\"absolute top-2 right-2 text-gray-500 hover:text-gray-800 focus:outline-none\",children:/*#__PURE__*/_jsx(\"span\",{className:\"material-icons-outlined text-2xl\",children:\"highlight_off\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"location-container\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Where\"}),/*#__PURE__*/_jsx(\"input\",{value:destination,onChange:handleDestinationChange,onFocus:handleDestinationFocus,className:\"input search-dest p-2 border rounded w-full\",placeholder:\"Search Destination\",autoFocus:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"location-container\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Check in\"}),/*#__PURE__*/_jsx(DateSelector,{checkInType:\"in\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"location-container\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Check out\"}),/*#__PURE__*/_jsx(DateSelector,{checkInType:\"out\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"location-container\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"No. of Guests\"}),/*#__PURE__*/_jsx(\"input\",{value:guests,className:\"input search-dest p-2 border rounded w-full\",placeholder:\"Add guests\",onChange:handleGuestChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-container flex items-center justify-center cursor-pointer bg-primary text-white p-2 rounded w-full sm:w-1/2 mx-auto\",onClick:handleSearchButtonClick,children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons-outlined\",children:\"search\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2\",children:\"Search\"})]})]}),isSearchResultOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"search-result-container bg-background text-primary mt-4 ml-24 max-h-10 overflow-y-auto rounded shadow-md absolute right-0 w-64\",children:destinationOptions.map((_ref2,index)=>{let{address,city}=_ref2;return/*#__PURE__*/_jsxs(\"p\",{className:\"p cursor-pointer hover:bg-gray-200 px-2 py-1\",onClick:()=>handleSearchResultClick(address),children:[address,\", \",city]},index);})})]})});};","map":{"version":3,"names":["React","useState","useEffect","axios","useDate","useCategory","DateSelector","useNavigate","jsx","_jsx","jsxs","_jsxs","SearchStayWithDate","dateDispatch","destination","guests","isSearchResultOpen","hotelCategory","hotels","setHotels","navigate","data","get","concat","err","console","error","handleDestinationChange","e","type","payload","target","value","handleGuestChange","handleSearchResultClick","address","destinationOptions","filter","_ref","city","state","country","toLowerCase","includes","handleDestinationFocus","handleSearchButtonClick","handleCloseModal","className","children","onClick","onChange","onFocus","placeholder","autoFocus","checkInType","map","_ref2","index"],"sources":["D:/travelappfrontend/src/components/SearchStayWithDate/SearchStayWithDate.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useDate } from \"../../context/date-context\";\r\nimport { useCategory } from \"../../context/category-context\";\r\nimport { DateSelector } from \"../DateSelector/DateSelector\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport const SearchStayWithDate = () => {\r\n    const { dateDispatch, destination, guests, isSearchResultOpen } = useDate();\r\n    const { hotelCategory } = useCategory();\r\n    const [hotels, setHotels] = useState([]);\r\n\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                const { data } = await axios.get(`https://travelapp-backend-cdeh.onrender.com/api/hotels?category=${hotelCategory}`);\r\n                setHotels(data);\r\n            } catch (err) {\r\n                console.error(\"Error fetching hotels:\", err);\r\n            }\r\n        })();\r\n    }, [hotelCategory]);\r\n\r\n    const handleDestinationChange = (e) => {\r\n        dateDispatch({\r\n            type: \"DESTINATION\",\r\n            payload: e.target.value\r\n        });\r\n    };\r\n\r\n    const handleGuestChange = (e) => {\r\n        dateDispatch({\r\n            type: \"GUESTS\",\r\n            payload: e.target.value\r\n        });\r\n    };\r\n\r\n    const handleSearchResultClick = (address) => {\r\n        dateDispatch({\r\n            type: \"DESTINATION\",\r\n            payload: address\r\n        });\r\n    };\r\n\r\n    const destinationOptions = hotels.filter(({ address, city, state, country }) =>\r\n        address.toLowerCase().includes(destination.toLowerCase()) ||\r\n        city.toLowerCase().includes(destination.toLowerCase()) ||\r\n        state.toLowerCase().includes(destination.toLowerCase()) ||\r\n        country.toLowerCase().includes(destination.toLowerCase())\r\n    );\r\n\r\n    const handleDestinationFocus = () => {\r\n        dateDispatch({\r\n            type: \"SHOW_SEARCH_RESULT\",\r\n        });\r\n    };\r\n\r\n    const handleSearchButtonClick = () => {\r\n        dateDispatch({\r\n            type: \"CLOSE_SEARCH_MODAL\",\r\n        });\r\n        navigate(`/hotels/${destination}`);\r\n    };\r\n\r\n    const handleCloseModal = () => {\r\n        dateDispatch({\r\n            type: \"OPEN_SEARCH_MODAL\"\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className=\"destination-container fixed inset-0 z-50 bg-overlay flex justify-center items-start\">\r\n            <div className=\"destination-options bg-background rounded-lg p-4 md:w-96 w-11/12 mt-12 relative flex \">\r\n                <button\r\n                    onClick={handleCloseModal}\r\n                    className=\"absolute top-2 right-2 text-gray-500 hover:text-gray-800 focus:outline-none\"\r\n                >\r\n                    <span className=\"material-icons-outlined text-2xl\">\r\n                        highlight_off\r\n                    </span>\r\n                </button>\r\n                <div className=\"flex flex-col space-y-4\">\r\n                    <div className=\"location-container\">\r\n                        <label className=\"label\">Where</label>\r\n                        <input\r\n                            value={destination}\r\n                            onChange={handleDestinationChange}\r\n                            onFocus={handleDestinationFocus}\r\n                            className=\"input search-dest p-2 border rounded w-full\"\r\n                            placeholder=\"Search Destination\"\r\n                            autoFocus\r\n                        />\r\n                    </div>\r\n                    <div className=\"location-container\">\r\n                        <label className=\"label\">Check in</label>\r\n                        <DateSelector checkInType=\"in\" />\r\n                    </div>\r\n                    <div className=\"location-container\">\r\n                        <label className=\"label\">Check out</label>\r\n                        <DateSelector checkInType=\"out\" />\r\n                    </div>\r\n                    <div className=\"location-container\">\r\n                        <label className=\"label\">No. of Guests</label>\r\n                        <input\r\n                            value={guests}\r\n                            className=\"input search-dest p-2 border rounded w-full\"\r\n                            placeholder=\"Add guests\"\r\n                            onChange={handleGuestChange}\r\n                        />\r\n                    </div>\r\n                    <div className=\"search-container flex items-center justify-center cursor-pointer bg-primary text-white p-2 rounded w-full sm:w-1/2 mx-auto\" onClick={handleSearchButtonClick}>\r\n                        <span className=\"material-icons-outlined\">search</span>\r\n                        <span className=\"ml-2\">Search</span>\r\n                    </div>\r\n                </div>\r\n\r\n               \r\n                {isSearchResultOpen && (\r\n                    <div className=\"search-result-container bg-background text-primary mt-4 ml-24 max-h-10 overflow-y-auto rounded shadow-md absolute right-0 w-64\">\r\n                        {destinationOptions.map(({ address, city }, index) => (\r\n                            <p\r\n                                key={index} \r\n                                className=\"p cursor-pointer hover:bg-gray-200 px-2 py-1\"\r\n                                onClick={() => handleSearchResultClick(address)}\r\n                            >\r\n                                {address}, {city}\r\n                            </p>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}